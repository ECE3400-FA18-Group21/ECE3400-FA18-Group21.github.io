<!DOCTYPE html>
<!-- ECE 3400 | Fall 2018
website for Team 21
Created: 08/29/2018
Updated: 11/29/2018 -->

<html lang="en">

  <head>
    <meta name="referrer" content="origin">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Used to document the work of Team 21 during the
    Fall 2018 semester of ECE 3400: Intelligent Physical Systems at Cornell University">
    <meta name="keywords" content="Cornell, Engineering, ECE 3400, Robotics, Maze, Win">
    <meta name="author" content="​Brian Richard, Eric Lei, Kenneth Fang, Tyler Sherman">

    <title>ECE 3400 | Fall 2018 - Team 21</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="css/agency.css" rel="stylesheet">
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=desert"></script>

    <!--favicon support for all modern browsers / mobile devices-->
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
    <link rel="manifest" href="img/favicon/site.webmanifest">
    <link rel="mask-icon" href="img/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="img/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

  </head>


  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">ECE 3400 - Team 21</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav text-uppercase ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="index.html">Home</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Milestones
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="milestone1.html#report">Milestone 1</a>
                <a class="dropdown-item" href="milestone2.html#report">Milestone 2</a>
                <a class="dropdown-item" href="milestone3.html#report">Milestone 3</a>
                <a class="dropdown-item" href="milestone4.html#report">Milestone 4</a>
              </div>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Labs
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="lab1.html#report">Lab 1</a>
                <a class="dropdown-item" href="lab2.html#report">Lab 2</a>
                <a class="dropdown-item" href="lab3.html#report">Lab 3</a>
                <a class="dropdown-item" href="lab4.html#report">Lab 4</a>
              </div>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Links
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="team-contract.html#contract">Team Contract</a>
                <a class="dropdown-item" href="meeting-minutes.html#minutes">Meeting Minutes</a>
                <a class="dropdown-item" href="ethics.html#assignment">Ethics Homework</a>
                <a class="dropdown-item" href="final-integration.html#design">Final System Integration</a>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" target="_blank" href="https://github.com/ECE3400-FA18-Group21/ECE3400-FA18-Group21.github.io/tree/master">Github</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <header class="masthead">
      <div class="container">
        <div class="intro-text">
          <div class="intro-lead-in">Lab 1</div>
          <div class="intro-heading text-uppercase">Microcontrollers</div>
          <a class="btn btn-primary btn-xl text-uppercase js-scroll-trigger" href="#report">Read the Report</a>
        </div>
      </div>
    </header>

    <!--THIS IS WHERE THE TEXT WILL GO-->
    <div class="container" id="report">
      <br><br>
      <h1 class="page-header text-center">Lab 1</h1>
      <hr>
      <h4 class="page-header text-left">Lab Goals</h4>
      <p>Learn basic functionalities of the Arduino Uno, the Arduino IDE, and
        the GitHub repository. In particular, focus on writing a program to
        control multiple external components connected to the Arduino Uno. At
        the end of the lab, put together a robot and have it perform a simple
        autonomous task.
      </p>
      <h4 class="page-header text-left">Prelab</h4>
      <ul class="list-bullet">
        <li>Setup GitHub accounts and create team website</li>
        <li>Review the <a target="_blank" href="https://www.arduino.cc/reference/en/">Arduino Reference</a></li>
        <li>Review documentation for the <a target="_blank" href="https://www.parallax.com/sites/default/files/downloads/900-00008-Continuous-Rotation-Servo-Documentation-v2.2.pdf">Parallax Continuous Rotation Servo</a></li>
      </ul>
      <h4 class="page-header text-left">Sub-Teams</h4>
      <p>To begin, we split into two groups of two. Each group progressed
        through the lab individually, as described below.
      </p>
      <ul class="list-bullet">
        <li>Brian and Tyler</li>
        <li>Eric and Kenneth</li>
      </ul>
      <h4 class="page-header text-left">Materials Used</h4>
      <ul>
        <li>1 Arduino Uno</li>
        <li>1 USB A/B cable</li>
        <li>1 Parallax continuous rotation servo</li>
        <li>1 LED (not IR)</li>
        <li>1 10kΩ Potentiometer</li>
        <li>Several resistors (kΩ range)</li>
        <li>1 Solderless breadboard</li>
      </ul>
      <hr>

      <h4 class="page-header text-left">Part 1 — Communicating Between the Uno and the IDE</h4>
      <p><u>GOAL: use the Blink sketch to control an internal LED</u></p>
      <ul>
        <li>Install Arduino IDE → <a target="_blank" href="https://www.arduino.cc/en/Main/Software">Download Link</a></li>
        <li>We first tested the example code “Blink”</li>
        <ul>
          <li>This example can be found under: File > Examples > 1.Basics > Blink</li>
          <li>An Arduino program is known as a “sketch”</li>
        </ul>
        <li>In the IDE, click checkmark to compile the code</li>
        <li>In the IDE, click right-pointing arrow to upload (program) the Uno</li>
        <ul>
          <li>If the LED does not blink, check under Tools > Serial Port list to make sure that the Uno is connected to the correct COM port</li>
        </ul>
      </ul>
      <p><b>All Arduino sketches require two functions:</b></p>
      <pre class="prettyprint"><code class="language-cpp">    void setup() {}</code></pre>
      <ul class="list-bullet">
        <li>Called at the start of the entire program</li>
        <li>Used to initialize variables and setup I/O pins</li>
        <li>Only executes once</li>
      </ul>
      <pre class="prettyprint"><code class="language-cpp">    void loop() {}</code></pre>
      <ul class="list-bullet">
        <li>Contains the main body of your program</li>
        <li>Loops forever</li>
      </ul>
      <p><b>Our example sketch code:</b></p>
      <pre class="prettyprint"><code class="language-cpp">
      void setup(){
          // initialize digital pin LED_BUILTIN as an output.
          pinMode(LED_BUILTIN, OUTPUT);
      }
      </code></pre>
      <ul class="list-bullet">
        <li>Instructs the Uno that the built-in LED should act as an output</li>
        <li>This allows us to write voltage values to turn the LED on and off</li>
      </ul>
      <pre class="prettyprint"><code class="language-cpp">
    // the loop function runs over and over again forever
    void loop() {
      digitalWrite(LED_BUILTIN, HIGH);   // turn the LED on (HIGH is the voltage level)
      delay(1000);                       // wait for a second
      digitalWrite(LED_BUILTIN, LOW);    // turn the LED off by making the voltage LOW
      delay(1000);                       // wait for a second
    }
      </code></pre>
      <ul class="list-bullet">
        <li>HIGH and LOW are global variables defined by Arduino, which correspond to logical high (on) and logical low (off)</li>
        <li>Since the LED_BUILTIN pin was set as an output, we can write these logical values to it</li>
        <li>The program delays for 1 second in between each high / low write (time units are in ms → 1000 ms = 1 second)</li>
      </ul>
      <hr>

      <h4 class="page-header text-left">Part 2 — Modify the Blink Sketch</h4>
      <p><u>GOAL: modify the Blink sketch to control an external LED</u></p>
      <ul class="list-bullet">
        <li>The code is identical to that of the Blink example, except for the pin number that the I/O functions use</li>
        <ul class="list-bullet">
          <li>Replace “LED_BUILTIN” with the pin number that the LED is connected to</li>
        </ul>
        <li>Use the LED with every digital pin to test that they all work</li>
        <li>As a safety measure, connect the LED in series with a 300 Ohm resistor.</li>
        <ul>
          <li>In the event of a complete short out, this limits the output current to
          I = V/R = (3.3V/300Ω) = 0.011 A.</li>
        </ul>
        <li>Below we show the LED blinking while connected to digital pin 0</li>
      </ul>
      <br>

      <pre class="prettyprint"><code class="language-cpp">
      void setup() {
        pinMode(0, OUTPUT);
      }

      void loop() {
        digitalWrite(0, HIGH);   // turn the LED on (HIGH is the voltage level)
        delay(1000);                 // wait for a second
        digitalWrite(0, LOW);    // turn the LED off by making the voltage LOW
        delay(1000);                  // wait for a second
      }
      </code></pre>
      <br>
      <div class="container">
        <div class="row">
          <div class="col-md-3">
          </div>
          <div class="col-md-6">
            <div class="thumbnail">
              <img src="img/lab1/part2.png" style="width:100%">
              <div class="caption text-center">
                <p>Green LED connected to digital pin 0</p>
              </div>
            </div>
          </div>
          <div class="col-md-3">
          </div>
        </div>
      </div>
      <hr>

      <h4 class="page-header text-left">Part 3 — The Serial Monitor and the Analog Pins</h4>
      <p><u>GOAL: read an analog value and verify it is correct via serial monitor</u></p>
      <ul>
        <li>Connect a potentiometer in parallel with a resistor</li>
        <li>This resulting output is connected in series with a 300 Ohm resistor to one of the Uno's analog pins</li>
        <li>The voltage values read by the analog pin are printed over the USB cable and displayed in the IDE’s serial monitor</li>
      </ul>

      <pre class="prettyprint"><code class="language-cpp">
      int readValue = 0;
      int pinName = A0;
      </code></pre>
      <ul>
        <li>Two variables are declared:</li>
        <ul>
          <li>readValue = the value that is output by the ADC</li>
          <li>pinName = the analog pin number that the potentiometer is connected to</li>
        </ul>
      </ul>


      <pre class="prettyprint"><code class="language-cpp">
      void setup() {
        Serial.begin(9600);  }
      </code></pre>
      <ul>
        <li>In setup(), Serial.begin(9600) initializes the serial connection between the Arduino and the computer it is connected to</li>
        <ul>
          <li>The baud rate is specified to be 9600</li>
          <li>Any COM port or serial monitor on the PC side must use the same baud rate in order to correctly transfer data</li>
        </ul>
      </ul>


      <pre class="prettyprint"><code class="language-cpp">
      void loop() {
        readValue = analogRead(pinName);
        Serial.println(readValue);
        delay(500);
      }
      </code></pre>
      <ul>
        <li>In loop(), analogRead returns the analog value from the potentiometer</li>
        <ul>
          <li>This is sent to Serial.println, which sends it across the USB cable and to the PC’s serial monitor</li>
          <li>A delay of 500 is used to wait for 0.5 seconds before reading from the analog pin again</li>
        </ul>
      </ul>
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <div class="thumbnail">
              <img src="img/lab1/part3_1.png" style="width:100%">
              <div class="caption text-center">
                <p>Analog values printed to the serial monitor</p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="thumbnail">
              <img src="img/lab1/part3_2.jpeg" style="width:100%">
              <div class="caption text-center">
                <p>The circuit</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr>

      <h4 class="page-header text-left">Part 4 — Analog Output</h4>
      <p><u>GOAL: use a potentiometer to control the speed of a servo</u></p>
      <ul>
        <li>The Arduino can only output digital signals.</li>
        <li>To simulate an analog output, use a pin with pulse-width modulation (PWM)</li>
        <ul>
          <li>For more information on PWM, look <a target="_blank" href="https://www.arduino.cc/en/Tutorial/PWM">here</a></li>
          <li>Arduino pins with PWM capability are denoted with a tilde (~) symbol</li>
        </ul>
        <li>To demonstrate this PWM capability, use a potentiometer to vary the brightness of an LED</li>
        <li>The potentiometer provides an analog input to the Arduino
        <ul>
          <li>Function = analogRead()
          <li>Range = (0, 1023)
        </ul>
        <li>A PWM-capable digital output pin controls the LED brightness</li>
        <ul>
          <li>analogWrite()</li>
          <li>Range = (0, 255)</li>
        </ul>
        <li>To handle the range mismatch between analogRead() and analogWrite(),
          we divided the read values by four (seen in last line).</li>
      </ul>

      <pre class="prettyprint"><code class="language-cpp">
      int analogInput = A0;
      int digitalPin = 11;
      int voltageValue = 0;
      int delayTime = 500; //half a second

      void setup() {
        Serial.begin(9600);
        pinMode(digitalPin, OUTPUT);
      }

      void loop() {
        voltageValue = analogRead(analogInput);
        Serial.println(voltageValue); //Prints to serial monitor, used for debugging purposes
        delay(delayTime);
        analogWrite(digitalPin, voltageValue/4);
      }
      </code></pre>
      <br>
      <p><u>Demo:</u></p>
      <div class="embed-responsive embed-responsive-21by9">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/zESgMMeBGgY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
      </div>

      <hr>

      <h4 class="page-header text-left">Part 5 — Parallax Servos</h4>
      <p><u>GOAL: use a potentiometer to control the brightness of an LED</u></p>
      <ul>
        <li>We connect Parallax continuous rotation servos to the Arduino and set it to run at varying speeds. </li>
        <li>In order to use servos, the Servo library needs to be included in the sketch. This is done with a #include statement at the top. </li>
        <li>A Servo object needs to be declared for each servo that is used. In the example below, “myservo” is the name of the servo that is connected to the Arduino. </li>
        <li>In setup(), myservo.attach(3) connects the servo to pin digital pin number 3. This a PWM capable pin, since servos need a PWM signal to operate.</li>
        <li>In loop(), the last statement, myservo.write(val), writes an integer value ranging from 0 to 180 to set the servo speed. This correlates with the PWM duty cycle that is outputted from the pin. A value of 0 rotates full speed in one direction, and 180 is full speed in the other direction. A value of 90 means the servo will not turn in either direction. </li>
        <li>The two statements above myservo.write() read analog voltage from the pin the potentiometer is connected to and set the servo to a speed corresponding to that voltage value. The map(readValue, 0, 670, 0, 180) function takes in the readValue input, which ranges from 0 to 670, and scales it to an integer value between 0 and 180, which is returned. This allows the potentiometer to control the servo movement. </li>
      </ul>

      <pre class="prettyprint"><code class="language-cpp">
        #include <Servo.h>
        int val = 90;
        int readValue = 0;
        int pinName = A0;
        Servo myservo;

        void setup() {
          myservo.attach(3);
        }

        void loop() {
          readValue = analogRead(pinName);
          val = map(readValue, 0, 670, 0, 180);
          myservo.write(val);
        }
      </code></pre>
      <br>
      <p><u>Demo:</u></p>
      <div class="embed-responsive embed-responsive-21by9">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/G1kvCMm8c5Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
      </div>

      <hr>

      <h4 class="page-header text-left">Part 6 — Assembling and Running Our Robot</h4>
      <p><u>GOAL: assemble the robot and make it perform a short autonomous task</u></p>
      <ul class="list-bullet">
        <li>This week we also assembled our robot and implemented basic autonomous movement</li>
        <li>We built our robot using the 3D-printed and laser-etched parts sitting in the lab room, including:</li>
        <ul class="list-bullet">
          <li>1 robot base (the large aqua platform in the image)</li>
          <li>1 Arduino Uno</li>
          <li>1 rechargeable battery</li>
          <li>1 solderless breadboard</li>
          <li>2 servo mounts</li>
          <li>2 Parallax continuous rotation servos</li>
          <li>2 ball bearings with connectors</li>
          <li>2 wheels</li>
          <li>3 rubber bands</li>
          <li>3 Pololu <a target="_blank" href="https://www.pololu.com/product/958">QTR-1A</a> Reflectance Sensors</li>
          <li>Various wires, screws, nuts, and spacers</li>
        </ul>
        <li>The construction of the robot was tedious and time-consuming</li>
        <li>We modeled our prototype off of last year’s designs
          (found on <a target="_blank" href="https://cei-lab.github.io/ece3400-2017/teams.html">their websites</a>)</li>
        <li>See the images below for a detailed overview of the design</li>
      </ul>
        <br>
        <div class="container">
          <div class="row">
            <div class="col-md-5">
              <div class="thumbnail">
                <img src="img/lab1/assembly1.JPG" style="width:100%">
              </div>
            </div>
            <div class="col-md-4">
              <div class="thumbnail">
                <img src="img/lab1/assembly2.JPG" style="width:100%">
              </div>
            </div>
            <div class="col-md-3">
              <div class="thumbnail">
                <img src="img/lab1/assembly3.jpg" style="width:100%">
              </div>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-3">
              <div class="thumbnail">
                <img src="img/lab1/assembly5.jpg" style="width:100%">
              </div>
            </div>
            <div class="col-md-6">
              <div class="thumbnail">
                <img src="img/lab1/assembly4.jpg" style="width:100%">
              </div>
            </div>
          </div>
        </div>
        <br>
        <p>For our code, we wrote a header file with the following movement commands:</p>

      <pre class="prettyprint"><code class="language-cpp">
        // Stops the robot
        void stopMotors(Servo servo_L, Servo servo_R);

        // Drives the robot forward
        void moveForward(Servo servo_L, Servo servo_R);

        // Drives the robot backward
        void moveBackward(Servo servo_L, Servo servo_R);

        // Turns the robot right slightly, based on [amount]
        void adjustRight(Servo servo_L, Servo servo_R, int amount);

        // Turns the robot left slightly, based on [amount]
        void adjustLeft(Servo servo_L, Servo servo_R, int amount);

        // Turns the robot 90 degrees right, in place
        void turnRight(Servo servo_L, Servo servo_R);

        // Turns the robot 90 degrees left, in place
        void turnLeft(Servo servo_L, Servo servo_R);
        </code></pre>

        <p>By running these commands sequentially with delays, we can program
          our robot to move around in arbitrary patterns. We used these functions
          to move our robot around a square in the video.
        </p>
        <div class="embed-responsive embed-responsive-21by9">
          <iframe width="560" height="315" src="https://www.youtube.com/embed/mx2mz0wDnFU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>

    </div>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-3">
          </div>
          <div class="col-md-6">
            <span class="copyright">Copyright &copy; 2018, Team 21 of ECE 3400 | Fall 2018.
              <br>
              Theme Made Using <a target="_blank" href="http://getbootstrap.com">Bootstrap
            </span>
          </div>
          <div class="col-md-3">
            <ul class="list-inline quicklinks">
              <li class="list-inline-item">
                <a target="_blank" href="https://cei-lab.github.io/ece3400-2018/">ECE 3400 Course Page</a>
              </li>
            </ul>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
          </div>
          <div class="col-md-4">
            <ul class="list-inline social-buttons">
              <li class="list-inline-item">
                <a target="_blank" href="https://github.com/ECE3400-FA18-Group21/ECE3400-FA18-Group21.github.io/tree/master">
                  <i class="fab fa-github"></i>
                </a>
              </li>
            </ul>
          </div>
          <div class="col-md-4">
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Contact form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/agency.min.js"></script>

  </body>

</html>
